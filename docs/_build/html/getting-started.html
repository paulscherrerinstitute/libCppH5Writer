
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Getting started with TOMCAT pco writer &#8212; Tomcat PCO Writer</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Usage" href="usage.html" />
    <link rel="prev" title="Installation" href="installation.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="getting-started-with-tomcat-pco-writer">
<h1>Getting started with TOMCAT pco writer<a class="headerlink" href="#getting-started-with-tomcat-pco-writer" title="Permalink to this headline">¶</a></h1>
<div class="section" id="caqtdm-panels">
<h2>CaQTdm panels<a class="headerlink" href="#caqtdm-panels" title="Permalink to this headline">¶</a></h2>
<p>It is assumed that the user is familiar with the pco edge camera’s acquisition panels (informations can be found at the website <a class="reference external" href="https://caqtdm.github.io/">caqtdm</a> and also at <a class="reference external" href="http://epics.web.psi.ch/software/caqtdm/">psi caqtdm page</a>).</p>
</div>
<div class="section" id="pco-client-controller-pco-rclient">
<h2>PCO client controller (pco_rclient)<a class="headerlink" href="#pco-client-controller-pco-rclient" title="Permalink to this headline">¶</a></h2>
<p>Verify if the pco_rclient is installed and working:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pco_rclient -h
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>usage: pco_rclient <span class="o">[</span>-h<span class="o">]</span> <span class="o">{</span>start,stop,kill,status<span class="o">}</span> ...

Rest api pco writer

optional arguments:
-h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>

command:
valid commands

<span class="o">{</span>start,stop,kill,status<span class="o">}</span>
                        commands
    start               start the writer
    stop                stop the writer
    <span class="nb">kill</span>                <span class="nb">kill</span> the writer
    status              Retrieve the status of the writer
</pre></div>
</div>
</div>
<div class="section" id="tomcat-pco-writer-configuration-file">
<h2>TOMCAT PCO writer configuration file<a class="headerlink" href="#tomcat-pco-writer-configuration-file" title="Permalink to this headline">¶</a></h2>
<p>From there, create a tomcat writer pco configuration file (<a href="#id1"><span class="problematic" id="id2">*</span></a>.pco) according to your needs. We recommend starting with the following template and adjust it to your needs:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="c1">######################################</span>
 <span class="c1"># PCO.EDGE WRITER CONFIGURATION FILE #</span>
 <span class="c1">#####################################</span>

 <span class="c1"># ZMQ incoming address (from the camera)</span>
 <span class="n">connection_address</span> <span class="o">=</span> <span class="n">tcp</span><span class="p">:</span><span class="o">//</span><span class="mf">129.129</span><span class="o">.</span><span class="mf">95.47</span><span class="p">:</span><span class="mi">8080</span>

 <span class="c1"># Output file name</span>
 <span class="n">output_file</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">h5</span>

 <span class="c1"># Total number of frames for this acquisition (0 for undefined - use the rest api to stop)</span>
 <span class="n">n_frames</span> <span class="o">=</span> <span class="mi">0</span>

 <span class="c1"># User id</span>
 <span class="n">user_id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

 <span class="c1"># Number of n_modules</span>
 <span class="n">n_modules</span> <span class="o">=</span> <span class="mi">1</span>

 <span class="c1"># Rest api port (that will connect with the pco_rclient )</span>
 <span class="n">rest_api_port</span> <span class="o">=</span> <span class="mi">8082</span>

 <span class="c1"># Dataset file name</span>
 <span class="n">dataset_name</span> <span class="o">=</span> <span class="n">data</span>

 <span class="c1"># Max frames per file</span>
 <span class="n">max_frames_per_file</span> <span class="o">=</span> <span class="mi">20000</span>

 <span class="c1"># TCP ZMQ output statistics address</span>
 <span class="n">tcp</span><span class="p">:</span><span class="o">//*</span><span class="p">:</span><span class="mi">8081</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>If the output file exists, data will be appended to it:</dt><dd><ul class="simple">
<li><p>Make sure to change the <strong>dataset_name</strong> variable. If a dataset with the same name already exists on the output file, the writer will exit.</p></li>
<li><p>Append to files at your own risk, if by any reason the second acquisition fails, the output file will be corrupted and the previously existing data will not be accessible any more.</p></li>
</ul>
</dd>
</dl>
<p>If the <strong>n_frames</strong> is 0, the writer will not stop until the client command is issued.
If you don’t know what the parameters means, we recommend to not change it.</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Tomcat PCO Writer</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting started with TOMCAT pco writer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#caqtdm-panels">CaQTdm panels</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pco-client-controller-pco-rclient">PCO client controller (pco_rclient)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tomcat-pco-writer-configuration-file">TOMCAT PCO writer configuration file</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="installation.html" title="previous chapter">Installation</a></li>
      <li>Next: <a href="usage.html" title="next chapter">Usage</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>